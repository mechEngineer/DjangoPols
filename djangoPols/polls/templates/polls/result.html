{% extends 'polls/base.html' %}

{% block content %}
    <h1>{{question.question_text}}</h1> <hr>
    {% if error_message %} <p><strong>{{ error_message }}</stromg</p> {% endif %}

    <ul>
    {% for choice in question.choice_set.all %}
        <li>{{choice.choice_text}} -- {{choice.votes}} vote{{choice.votes|pluralize}}</li>
    {% endfor %}
    </ul>

    <a href=" {% url 'polls:detail' question.id %} "> Vote again</a>


    <div class="chart-container" style="position: relative; height:40vh; width:80vw">
        <canvas id="chart"></canvas>
    </div>
{% endblock content %}


{% block scripts %}
<script>
var ctx = document.getElementById('chart').getContext('2d');
var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'bar',

    // The data for our dataset
    data: {
        labels: [{% for choice in question.choice_set.all %} 
        '{{choice.choice_text}}',{% endfor %} ],
        datasets: [{
            label: '# od Votes',
            backgroundColor: ['rgb(255, 99, 132, 0.5)',
                'rgba(54, 162, 235, 0.5)',
                'rgba(255, 206, 86, 0.5)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)'],
            borderColor: ['rgb(255, 99, 132)', 
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)'],
            borderWidth: 2,
            borderHoverWidth: 5,
            data: [{% for choice in question.choice_set.all %} 
        '{{choice.votes}}', {% endfor %} ]
        }]
    },

    // Configuration options go here
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

console.log(labels);
</script>
{% endblock scripts %}





